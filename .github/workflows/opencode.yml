name: OpenCode Issue Generator
on:
  schedule:
    - cron: '0 0 * * 1'  # 每周一 00:00 UTC（北京时间早8点）自动生成 Issues
  workflow_dispatch:      # 保留手动触发功能
  issue_comment:          # 保留指令触发功能
    types: [created]

jobs:
  generate-issues:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run OpenCode Issue Generator
        uses: opencode-ai/opencode-action@v1
        with:
          prompt: .opencode/prompt.md
          github-token: ${{ secrets.GITHUB_TOKEN }}
          minimax-api-key: ${{ secrets.MINIMAX_API_KEY }}
